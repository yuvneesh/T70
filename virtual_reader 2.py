import parser_2 as parse
import db_handler as db

initus = [
b'',
b'',
b'<?xml vers',
b'ion="1.0" ',
b'encoding="',
b'UTF-8" sta',
b'ndalone="y',
b'es" ?><MT>',
b'<Instrumen',
b'tInfo><Ins',
b'trumentTyp',
b'e>T70</Ins',
b'trumentTyp',
b'e><Command',
b'InterfaceF',
b'amily>Titr',
b'ation</Com',
b'mandInterf',
b'aceFamily>',
b'<CommandIn',
b'terfaceVer',
b'sion>1.0</',
b'CommandInt',
b'erfaceVers',
b'ion><Instr',
b'umentModul',
b'eInfo><Arr',
b'ayOfInstru',
b'mentModule',
b'Info><Modu',
b'leId>0</Mo',
b'duleId><Mo',
b'duleSerial',
b'Number>B31',
b'4199991</M',
b'oduleSeria',
b'lNumber><M',
b'oduleFirmw',
b'areVersion',
b'>4.0.3</Mo',
b'duleFirmwa',
b'reVersion>',
b'</ArrayOfI',
b'nstrumentM',
b'oduleInfo>',
b'</Instrume',
b'ntModuleIn',
b'fo></Instr',
b'umentInfo>',
b'<analysis>',
b'<header><i',
b'nstrument_',
b'id>Excelle',
b'nce Titrat',
b'or</instru',
b'ment_id><d',
b'ate_time>2',
b'023-01-21T',
b'22:16:42</',
b'date_time>',
b'<user>Admi',
b'nistrator<',
b'/user><met',
b'hod_id>120',
b'</method_i',
b'd><sample_',
b'series_id>',
b'SAMPLES2</s',
b'ample_seri',
b'es_id></he',
b'ader><samp',
b'le><number',
b'>1</number',
b'><id1>TEST3',
b'</id1><siz',
b'e>3.2345 g',
b'</size><de',
b'nsity>1.0 ',
b'g/mL</dens',
b'ity><temp>',
b'22 \xc2\xb0C</te',
b'mp><commen',
b't></commen',
b't><corr_fa',
b'ct>1.0</co',
b'rr_fact><s',
b'ample_star',
b't>2023-01-',
b'21T22:13:1',
b'4</sample_',
b'start><res',
b'ult><numbe',
b'r>R2</numb',
b'er><name>T',
b'AN</name><',
b'result_val',
b'ue>1.90 mg',
b' KOH/g</re',
b'sult_value',
b'></result>',
b'</sample><',
b'/analysis>',
b'</MT>',
b'',
b'',
b'',
b'',
b'',
b'',
b'',
b''
]

raw = ''

for byt in initus:
    data = byt

    raw += data.decode()

    if "</MT>" in raw:
        break

info = parse.read_data(raw)
print(info)

for sample in info:
    db.add_sample('samplestores3.db', sample)




